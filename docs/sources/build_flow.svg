<svg viewBox="0 0 800 650" class="kuiper-build-flow-diagram" xmlns="http://www.w3.org/2000/svg">
<defs>
      <!-- Arrow marker -->
      <marker id="arrowhead" markerWidth="10" markerHeight="7" 
            refX="9" refY="3.5" orient="auto" fill="#667eea">
      <polygon points="0 0, 10 3.5, 0 7" />
      </marker>
      
      <!-- Gradient for containers -->
      <linearGradient id="hostGradient" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#f8f9fa;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#e9ecef;stop-opacity:1" />
      </linearGradient>
      
      <linearGradient id="containerGradient" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#e3f2fd;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#bbdefb;stop-opacity:1" />
      </linearGradient>
      
      <linearGradient id="outputGradient" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#e8f5e8;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#c8e6c9;stop-opacity:1" />
      </linearGradient>
</defs>

<!-- ğŸ–¥ï¸ Host System -->
<rect x="100" y="50" width="560" height="560" rx="8" 
      fill="url(#hostGradient)" stroke="#6c757d" stroke-width="2"/>
<text x="650" y="80" text-anchor="end" font-family="Arial, sans-serif" font-size="18" font-weight="bold" fill="#333">
      ğŸ–¥ï¸ Host System
</text>

<!-- build-docker.sh -->
<rect x="170" y="100" width="140" height="60" rx="4" 
      fill="white" stroke="#adb5bd" stroke-width="1"/>
<text x="240" y="120" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold">ğŸ³ build-docker.sh</text>
<text x="240" y="135" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="#666">Reads config,</text>
<text x="240" y="150" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="#666">creates container</text>

<!-- Config file -->
<rect x="450" y="100" width="140" height="60" rx="4" 
      fill="white" stroke="#adb5bd" stroke-width="1"/>
<text x="520" y="125" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold">ğŸ“„ config</text>
<text x="520" y="145" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" fill="#666">Build configuration</text>

<!-- Arrow from config to build-docker.sh -->
<line x1="450" y1="130" x2="310" y2="130" stroke="#667eea" stroke-width="2" marker-end="url(#arrowhead)"/>

<!-- ğŸ³ Docker Container -->
<rect x="130" y="180" width="500" height="250" rx="6" 
      fill="url(#containerGradient)" stroke="#2196f3" stroke-width="2"/>
<text x="620" y="205" text-anchor="end" font-family="Arial, sans-serif" font-size="16" font-weight="bold" fill="#1976d2">
      ğŸ³ Docker Container
</text>

<!-- kuiper-stages.sh -->
<rect x="280" y="220" width="120" height="50" rx="3" 
      fill="white" stroke="#90a4ae" stroke-width="1"/>
<text x="340" y="235" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold">âš™ï¸ kuiper-stages.sh</text>
<text x="340" y="250" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#666">Orchestrates build</text>
<text x="340" y="262" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#666">stages</text>

<!-- Config copy -->
<rect x="460" y="220" width="120" height="50" rx="3" 
      fill="white" stroke="#90a4ae" stroke-width="1"/>
<text x="520" y="240" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold">ğŸ“„ config (copy)</text>
<text x="520" y="255" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#666">Configuration copy</text>

<!-- Stage Execution -->
<rect x="280" y="290" width="120" height="50" rx="3" 
      fill="white" stroke="#90a4ae" stroke-width="1"/>
<text x="340" y="310" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold">ğŸ”§ Stage Execution</text>
<text x="340" y="325" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#666">Processes all</text>
<text x="340" y="337" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#666">build stages</text>

<!-- Image Creation -->
<rect x="280" y="360" width="120" height="50" rx="3" 
      fill="white" stroke="#90a4ae" stroke-width="1"/>
<text x="340" y="380" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold">ğŸ’¿ Image Creation</text>
<text x="340" y="395" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#666">Generates</text>
<text x="340" y="407" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#666">final image</text>

<!-- Arrows within Docker container -->
<!-- config copy to kuiper-stages.sh -->
<line x1="460" y1="245" x2="400" y2="245" stroke="#667eea" stroke-width="2" marker-end="url(#arrowhead)"/>

<!-- kuiper-stages.sh to Stage Execution -->
<line x1="340" y1="270" x2="340" y2="290" stroke="#667eea" stroke-width="2" marker-end="url(#arrowhead)"/>

<!-- Stage Execution to Image Creation -->
<line x1="340" y1="340" x2="340" y2="360" stroke="#667eea" stroke-width="2" marker-end="url(#arrowhead)"/>

<!-- Arrow from build-docker.sh to docker container -->
<line x1="240" y1="160" x2="240" y2="180" stroke="#667eea" stroke-width="2" marker-end="url(#arrowhead)"/>
<text x="250" y="172" font-family="Arial, sans-serif" font-size="10" fill="#666" font-style="italic">Creates Docker container</text>

<!-- ğŸ“ kuiper-volume -->
<rect x="200" y="460" width="350" height="120" rx="8" 
      fill="url(#outputGradient)" stroke="#4caf50" stroke-width="2"/>
<text x="350" y="485" text-anchor="end" font-family="Arial, sans-serif" font-size="16" font-weight="bold" fill="#2e7d32">
      ğŸ“ kuiper-volume/
</text>

<!-- Build Artifacts -->
<text x="220" y="510" font-family="Arial, sans-serif" font-size="12" fill="#333">â”œâ”€â”€image_YYYY-MM-DD-ADI-Kuiper-Linux-[arch].zip</text>
<text x="220" y="525" font-family="Arial, sans-serif" font-size="12" fill="#333">â”œâ”€â”€build.log</text>
<text x="220" y="540" font-family="Arial, sans-serif" font-size="12" fill="#333">â”œâ”€â”€ADI_repos_git_info.txt</text>
<text x="220" y="554" font-family="Arial, sans-serif" font-size="12" fill="#333">â”œâ”€â”€licensing/</text>
<text x="220" y="568" font-family="Arial, sans-serif" font-size="12" fill="#333">â””â”€â”€sources/</text>

<!-- Arrow from docker container to output -->
<line x1="340" y1="430" x2="340" y2="460" stroke="#667eea" stroke-width="2" marker-end="url(#arrowhead)"/>
<text x="350" y="447" font-family="Arial, sans-serif" font-size="10" fill="#666" font-style="italic">Outputs to host</text>

</svg>
